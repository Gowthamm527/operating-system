name: Run C Programs

on: [push]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Install GCC
        run: sudo apt-get install gcc -y

      - name: Compile all C files
        run: |
          for file in *.c; do
            gcc "$file" -o "${file%.c}.out"
          done

      - name: Run all programs and save output
        run: |
          mkdir -p outputs
          for exe in *.out; do
            echo "----- Output of $exe -----" >> outputs/results.txt
            ./"$exe" >> outputs/results.txt
            echo "" >> outputs/results.txt
          done

      - name: Upload output file
        uses: actions/upload-artifact@v4

        with:
          name: program-outputs
          path: outputs/results.txt
